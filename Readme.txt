一. 初步版本的建立。（2023-02-01，by dazhi）
1. OTA程序来自网络，根据自己使用的gd32库进行了一些函数的替换。
2.本程序只在gd32f103vbt6上进行测试，其他单片机注意修改
3.本程序上电启动后，初始化串口（115200），单片机上电时在串口终端按ctrl+c可以进入下载模式，时间大概在200ms以内
4.下载模式使用Ymoden，建议使用secCRT等类似软件连接串口（115200，8N1）.
5.编译该程序，需要安装GD32F103的固件库



二。2023-02-02
1. 调整OTA到flash的末尾，在单片机的应用层跳转过去。
2.链接地址改为0x801d0000，最后保留12K字节给OTA程序。总大小0x2000000，128K字节
3.跳转之前需要关闭总中断，导致OTA的systick中断不可触发了。

三、2023-02-03
1. 可以使用OTA串口的方式升级了单片机应用程序，添加了脚本，自动生成bin文件，串口下载使用ymodem，传输应用bin文件
2.OTA程序在flash的头部位置，经验证，应用程序可以使用keil下载和在线调试功能。
3.如果批量升级的话，建议合并ota和本程序的bin文件。最终下载合并文件。（我是用jflash工具完成）
4.OTA程序大小10K左右，应用程序设置在偏移地址12K的位置。一定要注意OTA程序大bin文件大小，然后调整适当偏移值。


四、2023-04-12
1.现在增加了从rk3399升级的功能，目前下载正常，但是不太稳定，有时无法进入app运行。
2.rk3399的程序，请参考库https://github.com/zhaozhi0810/mcu_update_uart_ymodem
3.虽然使用串口1（PA2，3）下载，但是打印信息还是从调试串口（串口0，PA9，10）输出，可以进行终止输入。
4.OTA程序保留了16K字节，实际使用前15K，第16K（0x5c00）做了一些记录，方便重启时的状态识别。
5.app的起始地址修改到了0x8006000，偏移16K字节。单片机app收到升级命令后，设置相关标志，并让单片机重启进入iap程序。
6.现在主要还要考虑重复升级（如何识别版本）的问题，以及升级失败的处理。
7.本程序的flash写（擦除）操作目前被注释掉了，暂时只是调试了下载功能。
8.iap考虑保存md5码。用来识别版本，md5实际需要32个字节保存。


